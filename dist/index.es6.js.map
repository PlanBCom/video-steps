{"version":3,"file":"index.es6.js","sources":["../src/VideoSteps.js"],"sourcesContent":["\nclass VideoSteps {\n\n  constructor(selector, stepsOptions) {\n    this.video = selector;\n    this.currentStep = 0;\n    this.steps = stepsOptions;\n\n    const videoInstance = this;\n    this.video.onloadeddata = function () { // can play\n      // inicializa os steps desejados\n      videoInstance.ready();\n    };\n\n    this.setKeyShortcuts();\n  }\n\n  ready() {\n    this.video.play();\n    this.video.pause();\n    this.video.currentTime = this.steps[this.currentStep].seekTime;\n  }\n\n  next() {\n    const isValidStep = this.currentStep + 1 < this.steps.length;\n    const isInTransition = document.querySelector('.video-step.fading') != null;\n\n    if (isValidStep && !isInTransition) {\n      const currentStepTransition = this.steps[this.currentStep];\n      const oldElement = document.querySelector(currentStepTransition.elementId);\n\n      oldElement.setAttribute('class', 'fading');\n\n      this.currentStep = this.currentStep + 1;\n\n      this.seekAnimatedTo(this.currentStep);\n    }\n  }\n\n  prev() {\n    const isValidStep = this.currentStep - 1 >= 0;\n    const isInTransition = document.querySelector('.video-step.fading') != null;\n\n    if (isValidStep && !isInTransition) {\n      this.currentStep = this.currentStep - 1;\n      const currentStepTransition = this.steps[this.currentStep];\n\n      document.querySelector('.video-step').classList.remove('active');\n      document.querySelector(currentStepTransition.elementId).classList.add('active');\n\n      this.video.currentTime = currentStepTransition.seekTime;\n    }\n  }\n\n  seekAnimatedTo(step) {\n    const currentStepTransition = this.steps[step];\n    const transitionTime = currentStepTransition.seekTime - this.steps[step - 1].seekTime;\n    const videoAnimate = this.video;\n\n    videoAnimate.play();\n\n    setTimeout(() => {\n      videoAnimate.pause();\n      videoAnimate.currentTime = currentStepTransition.seekTime;\n\n      document.querySelector('.video-step').classList.remove('active', 'fading');\n      document.querySelector(currentStepTransition.elementId).add('active');\n    }, transitionTime * 1000);\n  }\n\n  setKeyShortcuts() {\n    const videoInstance = this;\n    document.keyup(e => {\n      const wch = e.which;\n      if (wch === 40 || wch === 39 || wch === 13 || wch === 32) { // down, right, enter, space\n        e.preventDefault();\n        videoInstance.next();\n      } else if (wch === 38 || wch === 37) { // up, left\n        e.preventDefault();\n        videoInstance.prev();\n      }\n    });\n  }\n\n  // $(\".videostep-next\").on('click', function() {\n  //   videoInstance.next();\n  // });\n\n  // $('html').on('mousewheel', function(event) {\n  //   if (event.originalEvent.deltaY > 50) {\n  //     videoInstance.next();\n  //   } else if (event.originalEvent.deltaY < -50) {\n  //     videoInstance.prev();\n  //   }\n  // });\n\n\n  // hello() {\n  //   return `Welcome, ${this.name}!`;\n  // }\n\n}\n\nexport default VideoSteps;\n"],"names":[],"mappings":";;;IACM;sBAEQ,QAAZ,EAAsB,YAAtB,EAAoC;;;SAC7B,KAAL,GAAa,QAAb;SACK,WAAL,GAAmB,CAAnB;SACK,KAAL,GAAa,YAAb;;QAEM,gBAAgB,IAAtB;SACK,KAAL,CAAW,YAAX,GAA0B,YAAY;;;oBAEtB,KAAd;KAFF;;SAKK,eAAL;;;;;4BAGM;WACD,KAAL,CAAW,IAAX;WACK,KAAL,CAAW,KAAX;WACK,KAAL,CAAW,WAAX,GAAyB,KAAK,KAAL,CAAW,KAAK,WAAhB,EAA6B,QAAtD;;;;2BAGK;UACC,cAAc,KAAK,WAAL,GAAmB,CAAnB,GAAuB,KAAK,KAAL,CAAW,MAAtD;UACM,iBAAiB,SAAS,aAAT,CAAuB,oBAAvB,KAAgD,IAAvE;;UAEI,eAAe,CAAC,cAApB,EAAoC;YAC5B,wBAAwB,KAAK,KAAL,CAAW,KAAK,WAAhB,CAA9B;YACM,aAAa,SAAS,aAAT,CAAuB,sBAAsB,SAA7C,CAAnB;;mBAEW,YAAX,CAAwB,OAAxB,EAAiC,QAAjC;;aAEK,WAAL,GAAmB,KAAK,WAAL,GAAmB,CAAtC;;aAEK,cAAL,CAAoB,KAAK,WAAzB;;;;;2BAIG;UACC,cAAc,KAAK,WAAL,GAAmB,CAAnB,IAAwB,CAA5C;UACM,iBAAiB,SAAS,aAAT,CAAuB,oBAAvB,KAAgD,IAAvE;;UAEI,eAAe,CAAC,cAApB,EAAoC;aAC7B,WAAL,GAAmB,KAAK,WAAL,GAAmB,CAAtC;YACM,wBAAwB,KAAK,KAAL,CAAW,KAAK,WAAhB,CAA9B;;iBAES,aAAT,CAAuB,aAAvB,EAAsC,SAAtC,CAAgD,MAAhD,CAAuD,QAAvD;iBACS,aAAT,CAAuB,sBAAsB,SAA7C,EAAwD,SAAxD,CAAkE,GAAlE,CAAsE,QAAtE;;aAEK,KAAL,CAAW,WAAX,GAAyB,sBAAsB,QAA/C;;;;;mCAIW,MAAM;UACb,wBAAwB,KAAK,KAAL,CAAW,IAAX,CAA9B;UACM,iBAAiB,sBAAsB,QAAtB,GAAiC,KAAK,KAAL,CAAW,OAAO,CAAlB,EAAqB,QAA7E;UACM,eAAe,KAAK,KAA1B;;mBAEa,IAAb;;iBAEW,YAAM;qBACF,KAAb;qBACa,WAAb,GAA2B,sBAAsB,QAAjD;;iBAES,aAAT,CAAuB,aAAvB,EAAsC,SAAtC,CAAgD,MAAhD,CAAuD,QAAvD,EAAiE,QAAjE;iBACS,aAAT,CAAuB,sBAAsB,SAA7C,EAAwD,GAAxD,CAA4D,QAA5D;OALF,EAMG,iBAAiB,IANpB;;;;sCASgB;UACV,gBAAgB,IAAtB;eACS,KAAT,CAAe,aAAK;YACZ,MAAM,EAAE,KAAd;YACI,QAAQ,EAAR,IAAc,QAAQ,EAAtB,IAA4B,QAAQ,EAApC,IAA0C,QAAQ,EAAtD,EAA0D;;YACtD,cAAF;wBACc,IAAd;SAFF,MAGO,IAAI,QAAQ,EAAR,IAAc,QAAQ,EAA1B,EAA8B;;YACjC,cAAF;wBACc,IAAd;;OAPJ;;;;;;;;;;;;;;;;;;;;;;;;;"}
{"version":3,"file":"index.umd.js","sources":["../src/VideoSteps.js"],"sourcesContent":["\nclass VideoSteps {\n\n  constructor(selector, stepsOptions) {\n    this.video = selector;\n    this.currentStep = 0;\n    this.steps = stepsOptions;\n\n    const videoInstance = this;\n    this.video.onloadeddata = function () { // can play\n      // inicializa os steps desejados\n      videoInstance.ready();\n    };\n\n    this.setKeyShortcuts();\n  }\n\n  ready() {\n    this.video.play();\n    this.video.pause();\n    this.video.currentTime = this.steps[this.currentStep].seekTime;\n  }\n\n  next() {\n    const isValidStep = this.currentStep + 1 < this.steps.length;\n    const isInTransition = document.querySelector('.video-step.fading') != null;\n\n    if (isValidStep && !isInTransition) {\n      const currentStepTransition = this.steps[this.currentStep];\n      const oldElement = document.querySelector(currentStepTransition.elementId);\n\n      oldElement.setAttribute('class', 'fading');\n\n      this.currentStep = this.currentStep + 1;\n\n      this.seekAnimatedTo(this.currentStep);\n    }\n  }\n\n  prev() {\n    const isValidStep = this.currentStep - 1 >= 0;\n    const isInTransition = document.querySelector('.video-step.fading') != null;\n\n    if (isValidStep && !isInTransition) {\n      this.currentStep = this.currentStep - 1;\n      const currentStepTransition = this.steps[this.currentStep];\n\n      document.querySelector('.video-step').classList.remove('active');\n      document.querySelector(currentStepTransition.elementId).classList.add('active');\n\n      this.video.currentTime = currentStepTransition.seekTime;\n    }\n  }\n\n  seekAnimatedTo(step) {\n    const currentStepTransition = this.steps[step];\n    const transitionTime = currentStepTransition.seekTime - this.steps[step - 1].seekTime;\n    const videoAnimate = this.video;\n\n    videoAnimate.play();\n\n    setTimeout(() => {\n      videoAnimate.pause();\n      videoAnimate.currentTime = currentStepTransition.seekTime;\n\n      document.querySelector('.video-step').classList.remove('active', 'fading');\n      document.querySelector(currentStepTransition.elementId).add('active');\n    }, transitionTime * 1000);\n  }\n\n  setKeyShortcuts() {\n    const videoInstance = this;\n    document.keyup(e => {\n      const wch = e.which;\n      if (wch === 40 || wch === 39 || wch === 13 || wch === 32) { // down, right, enter, space\n        e.preventDefault();\n        videoInstance.next();\n      } else if (wch === 38 || wch === 37) { // up, left\n        e.preventDefault();\n        videoInstance.prev();\n      }\n    });\n  }\n\n  // $(\".videostep-next\").on('click', function() {\n  //   videoInstance.next();\n  // });\n\n  // $('html').on('mousewheel', function(event) {\n  //   if (event.originalEvent.deltaY > 50) {\n  //     videoInstance.next();\n  //   } else if (event.originalEvent.deltaY < -50) {\n  //     videoInstance.prev();\n  //   }\n  // });\n\n\n  // hello() {\n  //   return `Welcome, ${this.name}!`;\n  // }\n\n}\n\nexport default VideoSteps;\n"],"names":[],"mappings":"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"}